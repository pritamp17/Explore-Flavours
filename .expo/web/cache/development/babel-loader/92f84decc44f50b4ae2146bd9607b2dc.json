{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var FavouritesContext = createContext();\nexport var FavouritesContextProvider = function FavouritesContextProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      favourites = _useState2[0],\n      setFavourites = _useState2[1];\n\n  var saveFavourites = function _callee(value) {\n    var jsonValue;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            jsonValue = JSON.stringify(value);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"@favourites\", jsonValue));\n\n          case 4:\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"error storing\", _context.t0);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  var loadFavourites = function _callee2() {\n    var value;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@favourites\"));\n\n          case 3:\n            value = _context2.sent;\n\n            if (value !== null) {\n              setFavourites(JSON.parse(value));\n            }\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(\"error loading\", _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var add = function add(restaurant) {\n    setFavourites([].concat(_toConsumableArray(favourites), [restaurant]));\n  };\n\n  var remove = function remove(restaurant) {\n    var newFavourites = favourites.filter(function (x) {\n      return x.placeId !== restaurant.placeId;\n    });\n    setFavourites(newFavourites);\n  };\n\n  useEffect(function () {\n    loadFavourites();\n  }, []);\n  useEffect(function () {\n    saveFavourites(favourites);\n  }, [favourites]);\n  return _jsx(FavouritesContext.Provider, {\n    value: {\n      favourites: favourites,\n      addToFavourites: add,\n      removeFromFavourites: remove\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","AsyncStorage","FavouritesContext","FavouritesContextProvider","children","favourites","setFavourites","saveFavourites","value","jsonValue","JSON","stringify","setItem","console","log","loadFavourites","getItem","parse","add","restaurant","remove","newFavourites","filter","x","placeId","addToFavourites","removeFromFavourites"],"sources":["E:/Final projects/react-native/MealsApp_/MealsApp/src/services/favourites/favourites.context.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport const FavouritesContext = createContext();\r\n\r\nexport const FavouritesContextProvider = ({ children }) => {\r\n    const [favourites, setFavourites] = useState([]);\r\n\r\n    const saveFavourites = async (value) => {\r\n      try {\r\n        const jsonValue = JSON.stringify(value);\r\n        await AsyncStorage.setItem(\"@favourites\", jsonValue);\r\n      } catch (e) {\r\n        console.log(\"error storing\", e);\r\n      }\r\n    };\r\n\r\n    const loadFavourites = async () => {\r\n      try {\r\n        const value = await AsyncStorage.getItem(\"@favourites\");\r\n        if (value !== null) {\r\n          setFavourites(JSON.parse(value));\r\n        }\r\n      } catch (e) {\r\n        console.log(\"error loading\", e);\r\n      }\r\n    };\r\n\r\n\r\n    const add = (restaurant) => {\r\n        setFavourites([...favourites, restaurant]);\r\n      };\r\n\r\n      const remove = (restaurant) => {\r\n        const newFavourites = favourites.filter(\r\n          (x) => x.placeId !== restaurant.placeId\r\n        );\r\n    \r\n        setFavourites(newFavourites);\r\n      };\r\n\r\n      useEffect(() => {\r\n        loadFavourites();\r\n      }, []);\r\n    \r\n      useEffect(() => {\r\n        saveFavourites(favourites);\r\n      }, [favourites]);\r\n      \r\n      return (\r\n        <FavouritesContext.Provider\r\n          value={{\r\n            favourites,\r\n            addToFavourites: add,\r\n            removeFromFavourites: remove,\r\n          }}\r\n        >\r\n          {children}\r\n        </FavouritesContext.Provider>\r\n      );\r\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,EAAyCC,SAAzC,QAA0D,OAA1D;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAEA,OAAO,IAAMC,iBAAiB,GAAGJ,aAAa,EAAvC;AAEP,OAAO,IAAMK,yBAAyB,GAAG,SAA5BA,yBAA4B,OAAkB;EAAA,IAAfC,QAAe,QAAfA,QAAe;;EACvD,gBAAoCL,QAAQ,CAAC,EAAD,CAA5C;EAAA;EAAA,IAAOM,UAAP;EAAA,IAAmBC,aAAnB;;EAEA,IAAMC,cAAc,GAAG,iBAAOC,KAAP;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAEbC,SAFa,GAEDC,IAAI,CAACC,SAAL,CAAeH,KAAf,CAFC;YAAA;YAAA,iCAGbP,YAAY,CAACW,OAAb,CAAqB,aAArB,EAAoCH,SAApC,CAHa;;UAAA;YAAA;YAAA;;UAAA;YAAA;YAAA;YAKnBI,OAAO,CAACC,GAAR,CAAY,eAAZ;;UALmB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAvB;;EASA,IAAMC,cAAc,GAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA;YAAA,iCAECd,YAAY,CAACe,OAAb,CAAqB,aAArB,CAFD;;UAAA;YAEbR,KAFa;;YAGnB,IAAIA,KAAK,KAAK,IAAd,EAAoB;cAClBF,aAAa,CAACI,IAAI,CAACO,KAAL,CAAWT,KAAX,CAAD,CAAb;YACD;;YALkB;YAAA;;UAAA;YAAA;YAAA;YAOnBK,OAAO,CAACC,GAAR,CAAY,eAAZ;;UAPmB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAvB;;EAYA,IAAMI,GAAG,GAAG,SAANA,GAAM,CAACC,UAAD,EAAgB;IACxBb,aAAa,8BAAKD,UAAL,IAAiBc,UAAjB,GAAb;EACD,CAFH;;EAIE,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACD,UAAD,EAAgB;IAC7B,IAAME,aAAa,GAAGhB,UAAU,CAACiB,MAAX,CACpB,UAACC,CAAD;MAAA,OAAOA,CAAC,CAACC,OAAF,KAAcL,UAAU,CAACK,OAAhC;IAAA,CADoB,CAAtB;IAIAlB,aAAa,CAACe,aAAD,CAAb;EACD,CAND;;EAQArB,SAAS,CAAC,YAAM;IACde,cAAc;EACf,CAFQ,EAEN,EAFM,CAAT;EAIAf,SAAS,CAAC,YAAM;IACdO,cAAc,CAACF,UAAD,CAAd;EACD,CAFQ,EAEN,CAACA,UAAD,CAFM,CAAT;EAIA,OACE,KAAC,iBAAD,CAAmB,QAAnB;IACE,KAAK,EAAE;MACLA,UAAU,EAAVA,UADK;MAELoB,eAAe,EAAEP,GAFZ;MAGLQ,oBAAoB,EAAEN;IAHjB,CADT;IAAA,UAOGhB;EAPH,EADF;AAWL,CAvDM"},"metadata":{},"sourceType":"module"}